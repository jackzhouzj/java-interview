# é˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œ-æœ€ä½³å®è·µ

> @author erik.zhou  
> éš¾åº¦: â­â­â­  
> é‡è¦æ€§: â­â­â­â­â­

## ğŸ“‹ ç›®å½•

- [ç¼–ç¨‹è§„çº¦](#ç¼–ç¨‹è§„çº¦)
- [å¼‚å¸¸æ—¥å¿—](#å¼‚å¸¸æ—¥å¿—)
- [MySQLæ•°æ®åº“](#mysqlæ•°æ®åº“)
- [å·¥ç¨‹ç»“æ„](#å·¥ç¨‹ç»“æ„)
- [å®‰å…¨è§„çº¦](#å®‰å…¨è§„çº¦)

---

## ğŸ“ ç¼–ç¨‹è§„çº¦

### 1. å‘½åé£æ ¼

#### ç±»å‘½å

```java
// âœ… æ­£ç¡®ï¼šä½¿ç”¨å¤§é©¼å³°å‘½å
public class UserService {}
public class OrderController {}
public class ProductDTO {}

// âŒ é”™è¯¯
public class userservice {}
public class order_controller {}
```

#### æ–¹æ³•å‘½å

```java
// âœ… æ­£ç¡®ï¼šä½¿ç”¨å°é©¼å³°å‘½åï¼ŒåŠ¨è¯å¼€å¤´
public void saveUser(User user) {}
public User getUserById(Long id) {}
public boolean isValid() {}
public boolean hasPermission() {}

// âŒ é”™è¯¯
public void SaveUser(User user) {}
public User get_user_by_id(Long id) {}
```

#### å¸¸é‡å‘½å

```java
// âœ… æ­£ç¡®ï¼šå…¨å¤§å†™ï¼Œä¸‹åˆ’çº¿åˆ†éš”
public static final int MAX_COUNT = 100;
public static final String DEFAULT_NAME = "admin";

// âŒ é”™è¯¯
public static final int maxCount = 100;
public static final String defaultName = "admin";
```

#### å˜é‡å‘½å

```java
// âœ… æ­£ç¡®ï¼šè§åçŸ¥æ„
String userName = "å¼ ä¸‰";
int orderCount = 10;
List<User> userList = new ArrayList<>();

// âŒ é”™è¯¯ï¼šæ— æ„ä¹‰å‘½å
String s = "å¼ ä¸‰";
int n = 10;
List<User> list1 = new ArrayList<>();
```

### 2. å¸¸é‡å®šä¹‰

```java
/**
 * å¸¸é‡å®šä¹‰æœ€ä½³å®è·µ
 * @author erik.zhou
 */
public class Constants {
    
    // âœ… æ­£ç¡®ï¼šä½¿ç”¨å¸¸é‡ç±»
    public static final class OrderStatus {
        public static final int CREATED = 0;
        public static final int PAID = 1;
        public static final int SHIPPED = 2;
        public static final int COMPLETED = 3;
        public static final int CANCELLED = 4;
        
        private OrderStatus() {}
    }
    
    // âœ… æ›´å¥½ï¼šä½¿ç”¨æšä¸¾
    public enum OrderStatusEnum {
        CREATED(0, "å·²åˆ›å»º"),
        PAID(1, "å·²æ”¯ä»˜"),
        SHIPPED(2, "å·²å‘è´§"),
        COMPLETED(3, "å·²å®Œæˆ"),
        CANCELLED(4, "å·²å–æ¶ˆ");
        
        private final int code;
        private final String desc;
        
        OrderStatusEnum(int code, String desc) {
            this.code = code;
            this.desc = desc;
        }
        
        public int getCode() { return code; }
        public String getDesc() { return desc; }
    }
    
    // âŒ é”™è¯¯ï¼šé­”æ³•å€¼
    public void processOrder(Order order) {
        if (order.getStatus() == 1) {  // 1æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ
            // ...
        }
    }
}
```

### 3. ä»£ç æ ¼å¼

```java
/**
 * ä»£ç æ ¼å¼æœ€ä½³å®è·µ
 * @author erik.zhou
 */
public class CodeFormatExample {
    
    // âœ… æ­£ç¡®ï¼šå¤§æ‹¬å·ä¸æ¢è¡Œ
    public void method1() {
        if (condition) {
            // do something
        }
    }
    
    // âŒ é”™è¯¯ï¼šå¤§æ‹¬å·æ¢è¡Œï¼ˆä¸ç¬¦åˆé˜¿é‡Œè§„èŒƒï¼‰
    public void method2()
    {
        if (condition)
        {
            // do something
        }
    }
    
    // âœ… æ­£ç¡®ï¼šif/for/whileå¿…é¡»ä½¿ç”¨å¤§æ‹¬å·
    if (condition) {
        doSomething();
    }
    
    // âŒ é”™è¯¯ï¼šçœç•¥å¤§æ‹¬å·
    if (condition)
        doSomething();
    
    // âœ… æ­£ç¡®ï¼šè¿ç®—ç¬¦ä¸¤è¾¹åŠ ç©ºæ ¼
    int result = a + b;
    boolean flag = (a > b) && (c < d);
    
    // âŒ é”™è¯¯ï¼šæ²¡æœ‰ç©ºæ ¼
    int result=a+b;
    boolean flag=(a>b)&&(c<d);
}
```

### 4. é›†åˆå¤„ç†

```java
/**
 * é›†åˆå¤„ç†æœ€ä½³å®è·µ
 * @author erik.zhou
 */
public class CollectionExample {
    
    /**
     * âœ… æ­£ç¡®ï¼šåˆ¤æ–­é›†åˆæ˜¯å¦ä¸ºç©º
     */
    public void checkCollection(List<String> list) {
        if (CollectionUtils.isEmpty(list)) {
            return;
        }
        // å¤„ç†é€»è¾‘
    }
    
    /**
     * âŒ é”™è¯¯ï¼šç›´æ¥åˆ¤æ–­size
     */
    public void checkCollectionWrong(List<String> list) {
        if (list.size() == 0) {  // å¦‚æœlistä¸ºnullä¼šNPE
            return;
        }
    }
    
    /**
     * âœ… æ­£ç¡®ï¼šä½¿ç”¨entrySetéå†Map
     */
    public void iterateMap(Map<String, String> map) {
        for (Map.Entry<String, String> entry : map.entrySet()) {
            String key = entry.getKey();
            String value = entry.getValue();
            // å¤„ç†é€»è¾‘
        }
    }
    
    /**
     * âŒ é”™è¯¯ï¼šä½¿ç”¨keySetéå†Map
     */
    public void iterateMapWrong(Map<String, String> map) {
        for (String key : map.keySet()) {
            String value = map.get(key);  // å¤šäº†ä¸€æ¬¡æŸ¥æ‰¾
            // å¤„ç†é€»è¾‘
        }
    }
    
    /**
     * âœ… æ­£ç¡®ï¼šä½¿ç”¨subListæ—¶æ³¨æ„
     */
    public void useSubList() {
        List<String> list = new ArrayList<>();
        list.add("a");
        list.add("b");
        list.add("c");
        
        // subListè¿”å›çš„æ˜¯åŸåˆ—è¡¨çš„è§†å›¾ï¼Œä¸æ˜¯æ–°åˆ—è¡¨
        List<String> subList = list.subList(0, 2);
        
        // ä¿®æ”¹subListä¼šå½±å“åŸåˆ—è¡¨
        subList.set(0, "x");
        System.out.println(list);  // [x, b, c]
    }
    
    /**
     * âœ… æ­£ç¡®ï¼šArrayListçš„subListä¸èƒ½å¼ºè½¬ä¸ºArrayList
     */
    public void subListCast() {
        List<String> list = new ArrayList<>();
        
        // âŒ é”™è¯¯ï¼šä¼šæŠ›å‡ºClassCastException
        // ArrayList<String> subList = (ArrayList<String>) list.subList(0, 1);
        
        // âœ… æ­£ç¡®ï¼šä½¿ç”¨Listæ¥æ”¶
        List<String> subList = list.subList(0, 1);
        
        // âœ… æˆ–è€…åˆ›å»ºæ–°çš„ArrayList
        ArrayList<String> newList = new ArrayList<>(list.subList(0, 1));
    }
}
```

### 5. å¹¶å‘å¤„ç†

```java
/**
 * å¹¶å‘å¤„ç†æœ€ä½³å®è·µ
 * @author erik.zhou
 */
public class ConcurrencyExample {
    
    /**
     * âœ… æ­£ç¡®ï¼šä½¿ç”¨çº¿ç¨‹æ± 
     */
    private final ExecutorService executor = new ThreadPoolExecutor(
        10,  // æ ¸å¿ƒçº¿ç¨‹æ•°
        20,  // æœ€å¤§çº¿ç¨‹æ•°
        60L, TimeUnit.SECONDS,  // ç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´
        new LinkedBlockingQueue<>(100),  // å·¥ä½œé˜Ÿåˆ—
        new ThreadFactoryBuilder().setNameFormat("my-pool-%d").build(),  // çº¿ç¨‹å·¥å‚
        new ThreadPoolExecutor.CallerRunsPolicy()  // æ‹’ç»ç­–ç•¥
    );
    
    /**
     * âŒ é”™è¯¯ï¼šç›´æ¥new Thread
     */
    public void wrongWay() {
        new Thread(() -> {
            // do something
        }).start();
    }
    
    /**
     * âœ… æ­£ç¡®ï¼šSimpleDateFormatçº¿ç¨‹ä¸å®‰å…¨ï¼Œä½¿ç”¨ThreadLocal
     */
    private static final ThreadLocal<SimpleDateFormat> DATE_FORMAT = 
        ThreadLocal.withInitial(() -> new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"));
    
    public String formatDate(Date date) {
        return DATE_FORMAT.get().format(date);
    }
    
    /**
     * âœ… æ›´å¥½ï¼šä½¿ç”¨DateTimeFormatterï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰
     */
    private static final DateTimeFormatter FORMATTER = 
        DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss");
    
    public String formatDateTime(LocalDateTime dateTime) {
        return dateTime.format(FORMATTER);
    }
    
    /**
     * âœ… æ­£ç¡®ï¼šä½¿ç”¨CountDownLatchç­‰å¾…å¤šä¸ªçº¿ç¨‹
     */
    public void useCountDownLatch() throws InterruptedException {
        int threadCount = 5;
        CountDownLatch latch = new CountDownLatch(threadCount);
        
        for (int i = 0; i < threadCount; i++) {
            executor.submit(() -> {
                try {
                    // æ‰§è¡Œä»»åŠ¡
                    doSomething();
                } finally {
                    latch.countDown();
                }
            });
        }
        
        // ç­‰å¾…æ‰€æœ‰çº¿ç¨‹å®Œæˆ
        latch.await();
    }
}
```

### 6. æ§åˆ¶è¯­å¥

```java
/**
 * æ§åˆ¶è¯­å¥æœ€ä½³å®è·µ
 * @author erik.zhou
 */
public class ControlStatementExample {
    
    /**
     * âœ… æ­£ç¡®ï¼šå«è¯­å¥ï¼Œæå‰return
     */
    public void processOrder(Order order) {
        if (order == null) {
            return;
        }
        
        if (order.getStatus() != OrderStatus.CREATED) {
            return;
        }
        
        // æ­£å¸¸å¤„ç†é€»è¾‘
        doProcess(order);
    }
    
    /**
     * âŒ é”™è¯¯ï¼šåµŒå¥—è¿‡æ·±
     */
    public void processOrderWrong(Order order) {
        if (order != null) {
            if (order.getStatus() == OrderStatus.CREATED) {
                // æ­£å¸¸å¤„ç†é€»è¾‘
                doProcess(order);
            }
        }
    }
    
    /**
     * âœ… æ­£ç¡®ï¼šswitchå¿…é¡»æœ‰default
     */
    public String getStatusDesc(int status) {
        switch (status) {
            case 0:
                return "å·²åˆ›å»º";
            case 1:
                return "å·²æ”¯ä»˜";
            case 2:
                return "å·²å‘è´§";
            default:
                return "æœªçŸ¥çŠ¶æ€";
        }
    }
    
    /**
     * âœ… æ­£ç¡®ï¼šä½¿ç”¨Optionalé¿å…NPE
     */
    public String getUserName(User user) {
        return Optional.ofNullable(user)
            .map(User::getName)
            .orElse("åŒ¿åç”¨æˆ·");
    }
}
```

---

## ğŸš¨ å¼‚å¸¸æ—¥å¿—

### 1. å¼‚å¸¸å¤„ç†

```java
/**
 * å¼‚å¸¸å¤„ç†æœ€ä½³å®è·µ
 * @author erik.zhou
 */
public class ExceptionExample {
    
    /**
     * âœ… æ­£ç¡®ï¼šæ•è·å…·ä½“å¼‚å¸¸
     */
    public void readFile(String path) {
        try {
            Files.readAllLines(Paths.get(path));
        } catch (IOException e) {
            log.error("è¯»å–æ–‡ä»¶å¤±è´¥: path={}", path, e);
            throw new BusinessException("æ–‡ä»¶è¯»å–å¤±è´¥", e);
        }
    }
    
    /**
     * âŒ é”™è¯¯ï¼šæ•è·Exception
     */
    public void readFileWrong(String path) {
        try {
            Files.readAllLines(Paths.get(path));
        } catch (Exception e) {  // å¤ªå®½æ³›
            log.error("é”™è¯¯", e);
        }
    }
    
    /**
     * âŒ é”™è¯¯ï¼šåæ‰å¼‚å¸¸
     */
    public void swallowException() {
        try {
            doSomething();
        } catch (Exception e) {
            // ä»€ä¹ˆéƒ½ä¸åšï¼Œå¼‚å¸¸è¢«åæ‰äº†
        }
    }
    
    /**
     * âœ… æ­£ç¡®ï¼šfinallyå…³é—­èµ„æº
     */
    public void closeResource() {
        InputStream is = null;
        try {
            is = new FileInputStream("file.txt");
            // å¤„ç†é€»è¾‘
        } catch (IOException e) {
            log.error("å¤„ç†å¤±è´¥", e);
        } finally {
            if (is != null) {
                try {
                    is.close();
                } catch (IOException e) {
                    log.error("å…³é—­æµå¤±è´¥", e);
                }
            }
        }
    }
    
    /**
     * âœ… æ›´å¥½ï¼šä½¿ç”¨try-with-resources
     */
    public void useAutoClose() {
        try (InputStream is = new FileInputStream("file.txt")) {
            // å¤„ç†é€»è¾‘
        } catch (IOException e) {
            log.error("å¤„ç†å¤±è´¥", e);
        }
    }
    
    /**
     * âœ… æ­£ç¡®ï¼šè‡ªå®šä¹‰å¼‚å¸¸
     */
    public class BusinessException extends RuntimeException {
        private String code;
        private String message;
        
        public BusinessException(String code, String message) {
            super(message);
            this.code = code;
            this.message = message;
        }
        
        public BusinessException(String message, Throwable cause) {
            super(message, cause);
            this.message = message;
        }
    }
}
```

### 2. æ—¥å¿—è§„èŒƒ

```java
/**
 * æ—¥å¿—è§„èŒƒæœ€ä½³å®è·µ
 * @author erik.zhou
 */
@Slf4j
public class LogExample {
    
    /**
     * âœ… æ­£ç¡®ï¼šä½¿ç”¨å ä½ç¬¦
     */
    public void correctLog(String userId, String orderId) {
        log.info("ç”¨æˆ·{}åˆ›å»ºè®¢å•{}", userId, orderId);
    }
    
    /**
     * âŒ é”™è¯¯ï¼šä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥
     */
    public void wrongLog(String userId, String orderId) {
        log.info("ç”¨æˆ·" + userId + "åˆ›å»ºè®¢å•" + orderId);  // æ€§èƒ½å·®
    }
    
    /**
     * âœ… æ­£ç¡®ï¼šæ¡ä»¶æ—¥å¿—
     */
    public void conditionalLog(List<String> list) {
        if (log.isDebugEnabled()) {
            log.debug("åˆ—è¡¨å†…å®¹: {}", JSON.toJSONString(list));
        }
    }
    
    /**
     * âœ… æ­£ç¡®ï¼šå¼‚å¸¸æ—¥å¿—
     */
    public void exceptionLog() {
        try {
            doSomething();
        } catch (Exception e) {
            // è®°å½•å¼‚å¸¸å †æ ˆ
            log.error("æ“ä½œå¤±è´¥", e);
        }
    }
    
    /**
     * âŒ é”™è¯¯ï¼šå¼‚å¸¸æ—¥å¿—
     */
    public void wrongExceptionLog() {
        try {
            doSomething();
        } catch (Exception e) {
            // åªè®°å½•æ¶ˆæ¯ï¼Œæ²¡æœ‰å †æ ˆ
            log.error("æ“ä½œå¤±è´¥: {}", e.getMessage());
        }
    }
    
    /**
     * âœ… æ­£ç¡®ï¼šæ—¥å¿—çº§åˆ«
     */
    public void logLevel() {
        log.trace("è¿½è¸ªä¿¡æ¯");  // æœ€è¯¦ç»†
        log.debug("è°ƒè¯•ä¿¡æ¯");  // è°ƒè¯•æ—¶ä½¿ç”¨
        log.info("é‡è¦ä¿¡æ¯");   // å…³é”®ä¸šåŠ¡æµç¨‹
        log.warn("è­¦å‘Šä¿¡æ¯");   // æ½œåœ¨é—®é¢˜
        log.error("é”™è¯¯ä¿¡æ¯");  // é”™è¯¯å¼‚å¸¸
    }
}
```

---

## ğŸ’¾ MySQLæ•°æ®åº“

### 1. å»ºè¡¨è§„çº¦

```sql
-- âœ… æ­£ç¡®ï¼šè§„èŒƒçš„å»ºè¡¨è¯­å¥
CREATE TABLE `user` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `username` varchar(50) NOT NULL COMMENT 'ç”¨æˆ·å',
  `password` varchar(100) NOT NULL COMMENT 'å¯†ç ',
  `email` varchar(100) DEFAULT NULL COMMENT 'é‚®ç®±',
  `phone` varchar(20) DEFAULT NULL COMMENT 'æ‰‹æœºå·',
  `status` tinyint(4) NOT NULL DEFAULT '1' COMMENT 'çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-å¯ç”¨',
  `create_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `update_time` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  `is_deleted` tinyint(4) NOT NULL DEFAULT '0' COMMENT 'æ˜¯å¦åˆ é™¤ï¼š0-å¦ï¼Œ1-æ˜¯',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_username` (`username`),
  KEY `idx_phone` (`phone`),
  KEY `idx_create_time` (`create_time`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ç”¨æˆ·è¡¨';

-- è§„çº¦è¯´æ˜ï¼š
-- 1. è¡¨åã€å­—æ®µåä½¿ç”¨å°å†™å­—æ¯ï¼Œå•è¯é—´ç”¨ä¸‹åˆ’çº¿åˆ†éš”
-- 2. ä¸»é”®å‘½åä¸ºidï¼Œç±»å‹ä¸ºbigint
-- 3. å¿…é¡»æœ‰create_timeå’Œupdate_time
-- 4. ä½¿ç”¨is_deletedå®ç°é€»è¾‘åˆ é™¤
-- 5. æ‰€æœ‰å­—æ®µå¿…é¡»æœ‰COMMENT
-- 6. åˆç†åˆ›å»ºç´¢å¼•
```

### 2. SQLè§„çº¦

```java
/**
 * SQLè§„çº¦æœ€ä½³å®è·µ
 * @author erik.zhou
 */
@Mapper
public interface UserMapper {
    
    /**
     * âœ… æ­£ç¡®ï¼šä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ï¼Œé˜²æ­¢SQLæ³¨å…¥
     */
    @Select("SELECT * FROM user WHERE username = #{username}")
    User selectByUsername(@Param("username") String username);
    
    /**
     * âŒ é”™è¯¯ï¼šå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œå­˜åœ¨SQLæ³¨å…¥é£é™©
     */
    // @Select("SELECT * FROM user WHERE username = '" + username + "'")
    
    /**
     * âœ… æ­£ç¡®ï¼šåˆ†é¡µæŸ¥è¯¢
     */
    @Select("SELECT * FROM user WHERE status = 1 LIMIT #{offset}, #{limit}")
    List<User> selectByPage(@Param("offset") int offset, @Param("limit") int limit);
    
    /**
     * âœ… æ­£ç¡®ï¼šæ‰¹é‡æ’å…¥
     */
    @Insert("<script>" +
            "INSERT INTO user (username, password, email) VALUES " +
            "<foreach collection='users' item='user' separator=','>" +
            "(#{user.username}, #{user.password}, #{user.email})" +
            "</foreach>" +
            "</script>")
    int batchInsert(@Param("users") List<User> users);
    
    /**
     * âœ… æ­£ç¡®ï¼šä½¿ç”¨ç´¢å¼•å­—æ®µæŸ¥è¯¢
     */
    @Select("SELECT * FROM user WHERE phone = #{phone}")
    User selectByPhone(@Param("phone") String phone);
    
    /**
     * âŒ é”™è¯¯ï¼šä¸è¦ä½¿ç”¨SELECT *
     */
    // @Select("SELECT * FROM user")
    
    /**
     * âœ… æ­£ç¡®ï¼šæ˜ç¡®æŒ‡å®šå­—æ®µ
     */
    @Select("SELECT id, username, email, phone FROM user WHERE id = #{id}")
    User selectById(@Param("id") Long id);
}
```

---

## ğŸ—ï¸ å·¥ç¨‹ç»“æ„

### 1. åº”ç”¨åˆ†å±‚

```
é¡¹ç›®ç»“æ„ï¼ˆæ¨èï¼‰ï¼š

src/main/java/
â”œâ”€â”€ com.example.project/
â”‚   â”œâ”€â”€ controller/          # æ§åˆ¶å±‚
â”‚   â”‚   â””â”€â”€ UserController.java
â”‚   â”œâ”€â”€ service/            # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ UserService.java
â”‚   â”‚   â””â”€â”€ impl/
â”‚   â”‚       â””â”€â”€ UserServiceImpl.java
â”‚   â”œâ”€â”€ dao/                # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â””â”€â”€ UserMapper.java
â”‚   â”œâ”€â”€ entity/             # å®ä½“ç±»
â”‚   â”‚   â””â”€â”€ User.java
â”‚   â”œâ”€â”€ dto/                # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚   â”œâ”€â”€ UserDTO.java
â”‚   â”‚   â””â”€â”€ UserVO.java
â”‚   â”œâ”€â”€ common/             # å…¬å…±ç±»
â”‚   â”‚   â”œâ”€â”€ Result.java
â”‚   â”‚   â”œâ”€â”€ Constants.java
â”‚   â”‚   â””â”€â”€ exception/
â”‚   â”‚       â””â”€â”€ BusinessException.java
â”‚   â””â”€â”€ util/               # å·¥å…·ç±»
â”‚       â””â”€â”€ DateUtil.java
```

### 2. åˆ†å±‚é¢†åŸŸæ¨¡å‹

```java
/**
 * åˆ†å±‚é¢†åŸŸæ¨¡å‹è§„çº¦
 * @author erik.zhou
 */

// DO (Data Object): æ•°æ®åº“å¯¹è±¡ï¼Œä¸æ•°æ®åº“è¡¨ä¸€ä¸€å¯¹åº”
@TableName("user")
public class UserDO {
    private Long id;
    private String username;
    private String password;
    // ...
}

// DTO (Data Transfer Object): æ•°æ®ä¼ è¾“å¯¹è±¡ï¼Œç”¨äºæœåŠ¡é—´ä¼ è¾“
public class UserDTO {
    private Long id;
    private String username;
    private String email;
    // ...
}

// VO (View Object): è§†å›¾å¯¹è±¡ï¼Œç”¨äºå‰ç«¯å±•ç¤º
public class UserVO {
    private Long id;
    private String username;
    private String email;
    private String createTime;
    // ...
}

// BO (Business Object): ä¸šåŠ¡å¯¹è±¡ï¼Œå°è£…ä¸šåŠ¡é€»è¾‘
public class UserBO {
    private UserDO userDO;
    
    public void register() {
        // æ³¨å†Œé€»è¾‘
    }
    
    public void login() {
        // ç™»å½•é€»è¾‘
    }
}
```

---

## ğŸ”’ å®‰å…¨è§„çº¦

### 1. æ•æ„Ÿä¿¡æ¯

```java
/**
 * æ•æ„Ÿä¿¡æ¯å¤„ç†
 * @author erik.zhou
 */
public class SecurityExample {
    
    /**
     * âœ… æ­£ç¡®ï¼šå¯†ç åŠ å¯†å­˜å‚¨
     */
    public void saveUser(User user) {
        // ä½¿ç”¨BCryptåŠ å¯†å¯†ç 
        String encryptedPassword = BCrypt.hashpw(user.getPassword(), BCrypt.gensalt());
        user.setPassword(encryptedPassword);
        userMapper.insert(user);
    }
    
    /**
     * âŒ é”™è¯¯ï¼šæ˜æ–‡å­˜å‚¨å¯†ç 
     */
    public void saveUserWrong(User user) {
        userMapper.insert(user);  // å¯†ç æ˜æ–‡å­˜å‚¨
    }
    
    /**
     * âœ… æ­£ç¡®ï¼šæ—¥å¿—è„±æ•
     */
    public void logUserInfo(User user) {
        log.info("ç”¨æˆ·ä¿¡æ¯: username={}, phone={}", 
            user.getUsername(), 
            maskPhone(user.getPhone()));  // æ‰‹æœºå·è„±æ•
    }
    
    private String maskPhone(String phone) {
        if (phone == null || phone.length() != 11) {
            return phone;
        }
        return phone.substring(0, 3) + "****" + phone.substring(7);
    }
}
```

---

## ğŸ“ æ€»ç»“

### æ ¸å¿ƒè¦ç‚¹

1. **å‘½åè§„èŒƒ** - è§åçŸ¥æ„ï¼Œç»Ÿä¸€é£æ ¼
2. **ä»£ç æ ¼å¼** - éµå¾ªç»Ÿä¸€çš„ä»£ç æ ¼å¼
3. **å¼‚å¸¸å¤„ç†** - æ­£ç¡®å¤„ç†å¼‚å¸¸ï¼Œä¸è¦åæ‰å¼‚å¸¸
4. **æ—¥å¿—è§„èŒƒ** - ä½¿ç”¨å ä½ç¬¦ï¼Œè®°å½•å…³é”®ä¿¡æ¯
5. **SQLè§„èŒƒ** - é˜²æ­¢SQLæ³¨å…¥ï¼Œåˆç†ä½¿ç”¨ç´¢å¼•
6. **å®‰å…¨è§„çº¦** - æ•æ„Ÿä¿¡æ¯åŠ å¯†ï¼Œæ—¥å¿—è„±æ•

### å­¦ä¹ å»ºè®®

1. **ç†Ÿè¯»æ‰‹å†Œ** - å®Œæ•´é˜…è¯»ã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œã€‹
2. **å·¥å…·è¾…åŠ©** - ä½¿ç”¨IDEAæ’ä»¶ï¼ˆAlibaba Java Coding Guidelinesï¼‰
3. **Code Review** - å›¢é˜Ÿäº’ç›¸Reviewï¼Œå‘ç°é—®é¢˜
4. **æŒç»­æ”¹è¿›** - ä¸æ–­ä¼˜åŒ–ä»£ç è´¨é‡

---

**ä½œè€…**: erik.zhou  
**æœ€åæ›´æ–°**: 2024-01-04
